<!-- src/main/resources/static/resume.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì´ë ¥ì„œ ì‘ì„±</title>
  <style>
    body { font-family: sans-serif; padding: 40px; }
    input, textarea { display: block; margin-bottom: 12px; padding: 8px; width: 300px; }
    button { padding: 8px 16px; }
  </style>
</head>
<body>
  <h2>ğŸ“„ ì´ë ¥ì„œ ì‘ì„±</h2>

  <form id="resume-form">
    <input type="text" id="name" placeholder="ì´ë¦„" required />
    <input type="email" id="email" placeholder="ì´ë©”ì¼" required />
    <textarea id="experience" placeholder="ê²½ë ¥" required></textarea>
    <textarea id="skills" placeholder="ê¸°ìˆ  ìŠ¤íƒ" required></textarea>
    <button type="submit">ì´ë ¥ì„œ ì €ì¥</button>
  </form>

  <script>
    document.getElementById("resume-form").addEventListener("submit", async (e) => {
      e.preventDefault();

      const token = localStorage.getItem("token");
      if (!token) {
        alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.");
        location.href = "login.html";
        return;
      }

      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const experience = document.getElementById("experience").value;
      const skills = document.getElementById("skills").value;

      const res = await fetch("/api/resumes", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer " + token
        },
        body: JSON.stringify({ name, email, experience, skills })
      });

      if (res.ok) {
        alert("ì´ë ¥ì„œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
        location.href = "mypage.html";
      } else {
        alert("ì´ë ¥ì„œ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
      }
    });
  </script>
</body>
</html>